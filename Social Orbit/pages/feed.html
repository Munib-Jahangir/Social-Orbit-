<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feed - Social Orbit</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="feed-layout">
        <!-- Top Glassmorphism Header -->
        <header class="glass-header">
            <div class="header-container">
                <div class="header-logo">Social Orbit</div>
                <div class="header-actions">
                    <button class="header-icon-btn" id="notificationsBtn">
                        <svg class="icon" viewBox="0 0 24 24" width="24" height="24">
                            <path fill="currentColor" d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                        </svg>
                        <span id="notificationBadge" class="notification-badge hidden">0</span>
                    </button>
                    <div class="header-dropdown">
                        <button class="header-icon-btn" id="profileDropdownBtn">
                            <svg class="icon" viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                            </svg>
                        </button>
                        <div class="dropdown-menu hidden" id="profileDropdown">
                            <button class="dropdown-item" onclick="window.location.href='profile.html'">My Profile</button>
                            <button class="dropdown-item" onclick="window.location.href='settings.html'">Settings</button>
                            <button class="dropdown-item danger" id="navbarLogoutBtn">Logout</button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="feed-container">
            <!-- Create Post -->
            <div class="create-post">
                <div class="create-post-header">
                    <img id="currentUserAvatar" src="" alt="You" class="user-avatar-sm">
                    <div class="create-post-input">
                        <textarea id="postTextarea" class="post-textarea" placeholder="What's on your mind?"></textarea>
                    </div>
                </div>
                <div class="create-post-actions">
                    <div class="post-options">
                        <button class="option-btn" id="addImageBtn" title="Add Image">
                            <svg class="icon" viewBox="0 0 24 24" width="20" height="20">
                                <path fill="currentColor" d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
                                <path fill="currentColor" d="M14.14 11.86l-3 3.87L9 13.14 6 17h12l-3.86-5.14z"/>
                            </svg>
                        </button>
                        <button class="option-btn" id="addLinkBtn" title="Add Link">
                            <svg class="icon" viewBox="0 0 24 24" width="20" height="20">
                                <path fill="currentColor" d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
                            </svg>
                        </button>
                    </div>
                    <button class="btn-post" id="postBtn">Post</button>
                </div>
                <input type="url" id="postImageInput" class="form-input hidden" placeholder="Image URL">
                <input type="url" id="postLinkInput" class="form-input hidden" placeholder="Link URL">
            </div>

            <!-- Filter Controls -->
            <div class="filter-controls">
                <select id="postFilter" class="filter-select">
                    <option value="latest">Latest</option>
                    <option value="oldest">Oldest</option>
                    <option value="mostLiked">Most Liked</option>
                    <option value="mostCommented">Most Commented</option>
                </select>
            </div>

            <!-- Posts Feed -->
            <div class="posts-feed" id="postsFeed"></div>

            <!-- Loading State -->
            <div id="loadingState" class="loading hidden">
                <div class="spinner"></div>
            </div>
        </div>

        <!-- Bottom Navigation Bar -->
        <nav class="bottom-nav">
            <button class="nav-item active" onclick="window.location.href='feed.html'">
                <svg class="icon" viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                </svg>
            </button>
            <button class="nav-item" onclick="window.location.href='search.html'">
                <svg class="icon" viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                </svg>
            </button>
            <button class="nav-item" onclick="window.location.href='all-posts.html'">
                <svg class="icon" viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 14H7v-4h4v4zm0-6H7V7h4v4zm6 6h-4v-4h4v4zm0-6h-4V7h4v4z"/>
                </svg>
            </button>
            <button class="nav-item" onclick="window.location.href='profile.html'">
                <svg class="icon" viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
            </button>
        </nav>
    </div>

    <!-- Notifications Modal -->
    <div id="notificationsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Notifications</h3>
                <button class="modal-close" id="closeNotifications">&times;</button>
            </div>
            <div id="notificationsList"></div>
        </div>
    </div>

    <!-- Edit Post Modal -->
    <div id="editPostModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Edit Post</h3>
                <button class="modal-close" id="closeEditModal">&times;</button>
            </div>
            <textarea id="editPostText" class="post-textarea"></textarea>
            <input type="url" id="editPostImage" class="form-input" placeholder="Image URL">
            <input type="url" id="editPostLink" class="form-input" placeholder="Link URL">
            <button class="btn-primary" id="saveEditBtn" style="margin-top: 1rem; width: 100%;">Save Changes</button>
        </div>
    </div>

    <script type="module" src="../js/app.js"></script>
</body>
</html>